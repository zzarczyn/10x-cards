---
import Layout from "../../layouts/Layout.astro";
import { ResetPasswordForm } from "../../components/auth/ResetPasswordForm";

// Read token from URL
// Supabase sends tokens as hash fragments or query params
const url = new URL(Astro.request.url);

// Try to get token from query params (Supabase format)
let token = url.searchParams.get("token");

// If not in query params, we might need to handle it client-side from hash
// For now, we'll pass what we have
// TODO: When integrating with Supabase, verify the exact token format and location

// In real implementation, Supabase uses token_hash in callback
// This page would typically be accessed after the callback processes it
---

<Layout title="10xCards - Zresetuj hasło">
  <div class="min-h-screen flex flex-col items-center justify-center px-4 py-8">
    <!-- Branding/Logo -->
    <div class="mb-8 text-center">
      <h1 class="text-3xl font-bold mb-2">10xCards</h1>
      <p class="text-muted-foreground">Twórz fiszki szybciej dzięki AI</p>
    </div>

    <!-- Auth Card -->
    <div class="w-full max-w-[420px] bg-card border border-border rounded-lg shadow-sm p-8">
      <ResetPasswordForm client:load token={token} />
    </div>

    <!-- Footer -->
    <div class="mt-8 text-center">
      <p class="text-sm text-muted-foreground">&copy; 2025 10xCards</p>
    </div>
  </div>
</Layout>
